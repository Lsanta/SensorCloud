<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.wda.sc.mapper.SiteMapper">

	<select id="getList" resultType="com.wda.sc.domain.SiteVO">
	<![CDATA[
		select site_id,type_no,site_name,address,site_status,substr(start_date,0,14) as start_date from site where rownum < 17 order by site_id asc
		]]>
	</select>

	<select id="getSite" resultType="com.wda.sc.domain.SiteVO">
		select * from site where site_id = #{site_id}
	</select>
	
	<select id="sitecheck" resultType="com.wda.sc.domain.CheckBoardVO">
		 select
  check_board.user_id,
  substr(check_board.reg_date,0,14) as reg_date,
  check_board.title,
  check_board.board_content,
  check_board.board_status,
  check_board.site_id,
  site.site_name
  from check_board,site
  where check_board.site_id = site.site_id and check_board.site_id = #{site_id}
	</select>
	
	<select id="getAlarm_member" resultType="com.wda.sc.domain.AlarmMemberVO">
		select name,tel,company from alarm_member where site_id = #{site_id}
	</select>
	
	<insert id="siteadd" parameterType="com.wda.sc.domain.SiteVO">
		insert into site(site_id,type_no,site_name,address,detail_address,start_date) values(#{site_id},#{type_no},#{site_name},#{address},#{detail_address},sysDate)
	</insert>
	
	<select id="getAlarm" resultType="com.wda.sc.domain.AlarmVO">
		select * from alarm where site_id = #{site_id}
	</select>
</mapper>
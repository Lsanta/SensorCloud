<!DOCTYPE html>
<html>
<head>
	<title>회원가입</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="../js/jquery.js"></script>
  <link rel="stylesheet" type="text/css" href="../css/login/sign.css">
</head>
<body>

	<div class="login-card">
		<img src="../img/logo.png">            
		<br>
		<form method="post" action="http://39.127.7.58:8080/app/signup">
			
			<label>아이디</label>
			<input type="text" name="user_id" id="user" placeholder="UserId">
			<div class="errorstr" id="userstr"></div>
			
			<label>비밀번호</label>
			<input type="password" name="password" placeholder="Password" id="password">
			<div class="errorstr" id="pwstr"></div>
			
			<label>비밀번호 확인</label>
			<input type="password" name="password2" placeholder="확인" id="password2">
			<div class="errorstr" id="pwconfirmstr"></div>

			<label>이름</label>
			<input type="text" name="name" placeholder="이름">
			
			<label>이메일</label>
			<input type="email" name="email" placeholder="yjc@ac.kr">

			<p>휴대폰번호</p>
			<input type="tel" id="phone" name="phone" placeholder="01012345678"> 

			<button type="button" class="ijn">인증번호 전송</button>
			<input type="password" class="end" placeholder="인증번호">

			<input type="submit" name="login" class="login login-submit" value="가입하기">
		</form>
	</div>

<script>
  $(document).ready(function() {
    		$('#user').blur(function(){
    			var id  = $("#user").val();
    			
    			var query = {
    					id : id
    			}
    			if(id.length < 5 || id.length > 12)
    				document.getElementById("userstr").innerHTML="5자리 이상 12자리 이하로 작성해주세요";
    			else{
    				$.ajax({
    				    type : "POST",
    				    dataType : 'text',
    				    data : query,
    				    url : "http://39.127.7.58:8080/app/signup_logincheck.do",
    				    success : function(data) {
    				    	if( data == "ok") {
    				    		$("#userstr").css("color","blue");
    				    		document.getElementById("userstr").innerHTML="사용 가능한 아이디입니다.";
    				    	} else{
    				    		$("#userstr").css("color","red");
    				    		document.getElementById("userstr").innerHTML="존재하는 아이디입니다.";
    				    	}
    				    } // success 함수 종료
    				}); // ajax 함수 종료
    			
    			} // else함수 종료
    		}); //blur 종료
    		
    		$("#password").blur(function(){
    			var passwd = $('#password').val();
    			if(passwd.length < 8 || passwd.length > 16)
    				document.getElementById("pwstr").innerHTML="8자리 이상 16자리 이하로 작성해주세요";
    			else
    				document.getElementById("pwstr").innerHTML="";
    		});
    		

    		$("#password2").blur(function(){
    			var passwd = $('#password').val();
    			var passwd2 = $('#password2').val();
    			
    			if(passwd != passwd2){
    				$("#pwconfirmstr").css("color","red");
    				document.getElementById("pwconfirmstr").innerHTML="비밀번호가 일치하지 않습니다.";
    			} else if ( passwd == passwd2) {
    				$("#pwconfirmstr").css("color","blue");
    				document.getElementById("pwconfirmstr").innerHTML="비밀번호가 일치합니다.";
    			}
    			
    		});
    		
    	});
</script>
</body>
</html>